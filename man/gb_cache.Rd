% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/gb-cache.R
\name{gb_cache}
\alias{gb_cache}
\alias{gb_set_cache}
\alias{gb_get_cache}
\alias{gb_list_cache}
\alias{gb_clear_cache}
\alias{gb_delete_from_cache}
\title{\pkg{rgeoboundaries}: cache utilities}
\usage{
gb_set_cache(path, install = FALSE, overwrite = FALSE, quiet = FALSE)

gb_get_cache(create = deprecated())

gb_list_cache(full_path = FALSE)

gb_clear_cache(force = TRUE, clear_config = FALSE, quiet = FALSE)

gb_delete_from_cache(file)
}
\arguments{
\item{path}{character. Path to the directory to use as cache. If omitted or
empty, a temporary directory inside \code{\link[base:tempfile]{base::tempdir()}} is used.}

\item{install}{logical. If \code{TRUE}, write the chosen path to the package
configuration directory so it is used in future sessions. Defaults to
\code{FALSE}. If path is omitted or is the \code{\link[=tempdir]{tempdir()}}, install is forced to
\code{FALSE}.}

\item{overwrite}{logical. If \code{TRUE} and \code{install = TRUE}, overwrite any
existing installed cache path. Defaults to \code{FALSE}.}

\item{quiet}{logical. If \code{TRUE} suppresses informational messages. Defaults
to \code{FALSE}.}

\item{create}{\ifelse{html}{\href{https://lifecycle.r-lib.org/articles/stages.html#deprecated}{\figure{lifecycle-deprecated.svg}{options: alt='[Deprecated]'}}}{\strong{[Deprecated]}}.}

\item{full_path}{logical, if \code{TRUE} returns the full path all the cached
files. If \code{FALSE} just the base names is provided.}

\item{force}{logical.  Should permissions be changed (if possible) to
    allow the file or directory to be removed?}

\item{clear_config}{logical. If \code{TRUE}, will delete the configuration
folder of \pkg{\pkg{rgeoboundaries}}.}

\item{file}{character. Base name of the cached file to delete.}
}
\value{
\itemize{
\item \code{gb_set_cache()}: (invisibly) returns the cache directory path (character)
that was set.
\item \code{gb_get_cache()}: returns the active cache directory path (character).
\item \code{gb_list_cache()}: returns a character vector with cached file names or
full paths depending on the \code{full_path} argument.
\item \code{gb_clear_cache()} and \code{gb_delete_from_cache()}: Called for their side
effects.
}
}
\description{
Utilities to manage a local cache directory used by \pkg{rgeoboundaries} for
downloaded boundary files. These helpers let you set a cache directory,
retrieve the active directory, list cached files and remove cached files or
the whole cache.

The primary functions are:
\itemize{
\item \code{gb_set_cache()}: configure where files will be stored (temporary by
default).
\item \code{gb_get_cache()}: get the active cache directory path.
\item \code{gb_list_cache()}: list files present in the cache.
\item \code{gb_clear_cache()}: remove all cached files (and optionally the
installed config).
\item \code{gb_delete_from_cache()}: remove one or more specific cached files.
}
}
\details{
By default, when no cache \code{path} is set the package uses a folder inside
\code{\link[base:tempfile]{base::tempdir()}} (so files are temporary and are removed when the R session
ends). To persist a cache across \strong{R} sessions, use
\code{gb_set_cache(path, install = TRUE)} which writes the chosen path to a small
configuration file under \code{tools::R_user_dir("rgeoboundaries", "config")}.
}
\section{Caching strategies}{

\itemize{
\item For occasional use, rely on the default \code{\link[=tempdir]{tempdir()}}-based cache (no
install).
\item Modify the cache for a single session setting
\code{gb_set_cache(path)}.
\item For reproducible workflows, install a persistent cache with
\code{gb_set_cache(path, install = TRUE)} that would be kept across \strong{R}
sessions.
}
}

\examples{

# Caution! This may modify your current state

\dontrun{
my_cache <- gb_get_cache()
# Set an example cache
ex <- file.path(tempdir(), "example", "cache")
gb_set_cache(ex, quiet = TRUE)

newcache <- gb_get_cache()
newcache

# Write files to path
cat(1:10000L, file = file.path(newcache, "a.txt"))
cat(1:10000L, file = file.path(newcache, "b.txt"))
cat(1:10000L, file = file.path(newcache, "c.txt"))

# List cache
gb_list_cache()

# Delete one file
gb_delete_from_cache("a.txt")

gb_list_cache()

# Delete all
gb_clear_cache(quiet = FALSE)

gb_list_cache()

# Restore initial cache
gb_set_cache(my_cache)
identical(my_cache, gb_get_cache())
}

}
\seealso{
\code{\link[tools:userdir]{tools::R_user_dir()}}, \code{\link[base:tempfile]{base::tempdir()}}
}
\concept{cache utilities}
